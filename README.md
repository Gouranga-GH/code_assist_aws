# CodeLlama Coding Assistant (AWS Bedrock + Gradio)

A simple coding assistant web app using CodeLlama via Amazon Bedrock, with a Gradio UI, deployable on AWS EC2.

---

## Features
- Enter a coding prompt, get code generated by CodeLlama (via Bedrock)
- Simple, modern Gradio web interface
- Runs on AWS EC2 (or locally)

---

## 1. Prerequisites

- **AWS Account** with access to Amazon Bedrock and CodeLlama model
- **IAM User/Role** with permissions for Bedrock (`bedrock:InvokeModel`)
- **EC2 Instance** (Ubuntu recommended)
- **Python 3.8+**

---

## 2. Launch an EC2 Instance

1. Go to AWS Console → EC2 → Launch Instance
2. Choose Ubuntu 20.04/22.04 (or Amazon Linux 2)
3. Choose instance type (t2.medium or better recommended)
4. Configure security group:
   - Allow inbound TCP on port **7860** (for Gradio)
   - Allow SSH (port 22) from your IP
5. Launch and connect via SSH

---

## 3. Install Dependencies

```bash
sudo apt update
sudo apt install python3-pip -y
cd /home/ubuntu  # or your working directory
# Upload or git clone this project here
pip3 install -r requirements.txt
```

---

## 4. Configure AWS Credentials

**Option 1: Use IAM Role (recommended for EC2)**
- Attach an IAM role with Bedrock permissions to your EC2 instance.

**Option 2: Use AWS CLI credentials**
```bash
aws configure
# Enter your AWS Access Key, Secret, region (e.g., us-east-1)
```

---

## 5. Set Environment Variables (Optional)

You can set these in your shell or in a `.env` file:
- `AWS_REGION` (default: us-east-1)
- `BEDROCK_MODEL_ID` (default: codellama, update if your Bedrock model ID is different)

Example:
```bash
export AWS_REGION=us-east-1
export BEDROCK_MODEL_ID=codellama
```

---

## 6. Run the App

```bash
python3 app.py
```
- The app will be available at: `http://<EC2_PUBLIC_IP>:7860`

---

## 7. Usage
- Enter a prompt (e.g., "Write a Python function to reverse a string")
- The generated code will appear below

---

## 8. Troubleshooting
- **Model not found?** Check your Bedrock model ID and permissions
- **Timeouts?** Ensure your EC2 security group allows port 7860
- **AWS errors?** Check credentials and region

---

## 9. Notes
- This is a minimal demo. For production, add authentication and HTTPS.
- You may need to adjust the Bedrock payload/response parsing depending on the latest API.

---

## 10. References
- [Amazon Bedrock Documentation](https://docs.aws.amazon.com/bedrock/latest/userguide/)
- [Gradio Documentation](https://gradio.app/docs/) 